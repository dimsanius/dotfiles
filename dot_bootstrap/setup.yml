# - Run current script: ansible-playbook ./setup.yml --ask-become-pass
# - For dev: install ansible-lint: pip install ansible-lint
- name: Machine setup
  hosts: localhost
  connection: local
  gather_facts: true
  vars:
    jetbrains_toolbox_version: "jetbrains-toolbox-2.4.0.32175"

  tasks:
    - name: Main | Including SSH key install task
      ansible.builtin.include_tasks: tasks/ssh.yml

    - name: Main | Including package install task
      ansible.builtin.include_tasks: tasks/packages.yml

    - name: Main | Including GNOME Extension install task
      ansible.builtin.include_tasks: tasks/gnome_extensions.yml
    
    - name: Main | Including JetBrains Toolbox install task
      ansible.builtin.include_tasks: tasks/jetbrains_toolbox.yml

    - name: Main | Including Oh My zsh install task
      ansible.builtin.include_tasks: tasks/omz.yml
    
    - name: Main | Including Oh My zsh addon install
      ansible.builtin.include_tasks: tasks/omz_addons.yml

    - name: Main | Including vim addon install task
      ansible.builtin.include_tasks: tasks/vim.yml

    - name: Main | Including Brave install task
      ansible.builtin.include_tasks: tasks/brave.yml

    - name: Main | Including VS Code install task
      ansible.builtin.include_tasks: tasks/vs_code.yml

    - name: Main | Including Sublime Text install task
      ansible.builtin.include_tasks: tasks/sublime_text.yml

    - name: Main | Including Zoxide install task
      ansible.builtin.include_tasks: tasks/zoxide.yml

    - name: Main | Including chezmoi fixup task
      ansible.builtin.include_tasks: tasks/chezmoi.yml

    - name: Main | Including Slack install task
      when: environment_type == "work"
      ansible.builtin.include_tasks: tasks/slack.yml

    - name: Main | Including Git commit user info set task
      ansible.builtin.include_tasks: tasks/git_set.yml

    - name: Main | Including environment selector install task
      ansible.builtin.include_tasks: tasks/env_selector.yml

    # Ensure to run misc as a last task
    - name: Main | Including misc install task
      ansible.builtin.include_tasks: tasks/misc.yml
